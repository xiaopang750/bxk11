/*! fanwei 2014-03-10 */
define("lib/template/template",[],function(t,e,n){!function(t){"use strict";var r,i,o,s,a=function(t,e){return a["string"==typeof e?"compile":"render"].apply(a,arguments)};a.version="2.0.2",a.openTag="<%",a.closeTag="%>",a.isEscape=!0,a.isCompress=!1,a.parser=null,a.render=function(t,e){var n=a.get(t)||o({id:t,name:"Render Error",message:"No Template"});return n(e)},a.compile=function(t,e){function n(n){try{return new i(n,t)+""}catch(r){return l?o(r)():a.compile(t,e,!0)(n)}}var i,c=arguments,l=c[2],u="anonymous";"string"!=typeof e&&(l=c[1],e=c[0],t=u);try{i=s(t,e,l)}catch(h){return h.id=t||e,h.name="Syntax Error",o(h)}return n.prototype=i.prototype,n.toString=function(){return""+i},t!==u&&(r[t]=n),n},r=a.cache={},i=a.helpers={$include:a.render,$string:function(t,e){return"string"!=typeof t&&(e=typeof t,"number"===e?t+="":t="function"===e?i.$string(t()):""),t},$escape:function(t){var e={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};return i.$string(t).replace(/&(?![\w#]+;)|[<>"']/g,function(t){return e[t]})},$each:function(t,e){var n,r,i=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)};if(i(t))for(n=0,r=t.length;r>n;n++)e.call(t,t[n],n,t);else for(n in t)e.call(t,t[n],n)}},a.helper=function(t,e){i[t]=e},a.onerror=function(e){var n,r="Template Error\n\n";for(n in e)r+="<"+n+">\n"+e[n]+"\n\n";t.console&&console.error(r)},a.get=function(e){var n,i,o;return r.hasOwnProperty(e)?n=r[e]:"document"in t&&(i=document.getElementById(e),i&&(o=i.value||i.innerHTML,n=a.compile(e,o.replace(/^\s*|\s*$/g,"")))),n},o=function(t){return a.onerror(t),function(){return"{Template Error}"}},s=function(){var t=i.$each,e="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",n=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,r=/[^\w$]+/g,o=RegExp(["\\b"+e.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),s=/^\d[^,]*|,\d[^,]*/g,c=/^,+|,+$/g,l=function(t){return t.replace(n,"").replace(r,",").replace(o,"").replace(s,"").replace(c,"").split(/^$|,+/)};return function(e,n,r){function o(t){return y+=t.split(/\n/).length-1,a.isCompress&&(t=t.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"")),t&&(t=E[1]+h(t)+E[2]+"\n"),t}function s(t){var e,n,o=y;return m?t=m(t):r&&(t=t.replace(/\n/g,function(){return y++,"$line="+y+";"})),0===t.indexOf("=")&&(e=0!==t.indexOf("=="),t=t.replace(/^=*|[\s;]*$/g,""),e&&a.isEscape?(n=t.replace(/\s*\([^\)]+\)/,""),i.hasOwnProperty(n)||/^(include|print)$/.test(n)||(t="$escape("+t+")")):t="$string("+t+")",t=E[1]+t+E[2]),r&&(t="$line="+o+";"+t),c(t),t+"\n"}function c(e){e=l(e),t(e,function(t){b.hasOwnProperty(t)||(u(t),b[t]=!0)})}function u(t){var e;"print"===t?e=T:"include"===t?(_.$include=i.$include,e=$):(e="$data."+t,i.hasOwnProperty(t)&&(_[t]=i[t],e=0===t.indexOf("$")?"$helpers."+t:e+"===undefined?$helpers."+t+":"+e)),x+=t+"="+e+","}function h(t){return"'"+t.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}var p,f=a.openTag,d=a.closeTag,m=a.parser,g=n,v="",y=1,b={$data:1,$id:1,$helpers:1,$out:1,$line:1},_={},x="var $helpers=this,"+(r?"$line=0,":""),w="".trim,E=w?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],S=w?"if(content!==undefined){$out+=content;return content;}":"$out.push(content);",T="function(content){"+S+"}",$="function(id,data){data=data||$data;var content=$helpers.$include(id,data,$id);"+S+"}";t(g.split(f),function(t){var e,n;t=t.split(d),e=t[0],n=t[1],1===t.length?v+=o(e):(v+=s(e),n&&(v+=o(n)))}),g=v,r&&(g="try{"+g+"}catch(e){"+"throw {"+"id:$id,"+"name:'Render Error',"+"message:e.message,"+"line:$line,"+"source:"+h(n)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')"+"};"+"}"),g=x+E[0]+g+"return new String("+E[3]+");";try{return p=Function("$data","$id",g),p.prototype=_,p}catch(H){throw H.temp="function anonymous($data,$id) {"+g+"}",H}}}(),"function"==typeof define?define(function(){return a}):e!==void 0&&(n.exports=a),t.template=a,n.exports=a}(this),function(t){t.openTag="{{",t.closeTag="}}",t.parser=function(e){var n,r,i,o,s,a,c,l;switch(e=e.replace(/^\s/,""),n=e.split(" "),r=n.shift(),i=n.join(" "),r){case"if":e="if("+i+"){";break;case"else":n="if"===n.shift()?" if("+n.join(" ")+")":"",e="}else"+n+"{";break;case"/if":e="}";break;case"each":o=n[0]||"$data",s=n[1]||"as",a=n[2]||"$value",c=n[3]||"$index",l=a+","+c,"as"!==s&&(o="[]"),e="$each("+o+",function("+l+"){";break;case"/each":e="});";break;case"echo":e="print("+i+");";break;case"include":e="include("+n.join(",")+");";break;default:t.helpers.hasOwnProperty(r)?e="=="+r+"("+n.join(",")+");":(e=e.replace(/[\s;]*$/,""),e="="+e)}return e}}(template)});