/*! fanwei 2014-03-10 */
define("global/global",["../global/backtop","../global/bodyParse","../global/tip","../global/fnDo","../global/navhilight"],function(t){t("../global/backtop");var e=t("../global/bodyParse");t("../global/tip"),t("../global/fnDo"),t("../global/navhilight"),window._query=e(),window.token=_query.token,window.wid=_query.wecha_id,window.loading=function(t){function e(){$("#cover").animate({opacity:0},300,"ease-out",function(){$("#cover").hide()})}function n(){$("#cover").show(),$("#cover").css("opacity","1")}n();var r,i=$("img"),a=0,s=i.length;i.each(function(n){var o=new Image;r=i.eq(n).attr("src"),o.onload=function(){a++,a==s&&(e(),t&&t())},o.onerror=function(){a++,a==s&&(e(),t&&t())},o.src=r})}}),define("global/backtop",[],function(){$("[script-role = backtop]").on("click",function(){document.documentElement.scrollTop=0,document.body.scrollTop=0})}),define("global/bodyParse",[],function(){function t(){var t,e,n,r,i,a,s;if(window.location.search){for(t=decodeURIComponent(window.location.search.split("?")[1]),e=t.split("&"),r=e.length,s={},a=0;r>a;a++)n=e[a].split("="),i=n.length,s[n[0]]=n[1];return s}return null}return t}),define("global/tip",[],function(t,e,n){function r(t){t=t||{},this.oWrap=null,this.bottom=t.bottom||"100px",this.delay=t.delay||2e3,this.timeBtn=t.timeBtn?!0:true,this.timer=null}r.prototype={init:function(){this.create(),this.setStyle(this.oWrap)},create:function(){this.oWrap=$("<div></div>"),$("body").append(this.oWrap)},setStyle:function(t){t.css({position:"fixed",bottom:this.bottom,borderRadius:"5px",boxShadow:"1px 1px 1px solid #000",padding:"0.5rem 1.25rem",background:"rgba(0, 0, 0 ,0.8)",color:"#fff",display:"block",left:"50%",zIndex:2e3,opacity:0})},transition:function(){$.css3(this.oWrap,{transition:"opacity .8s"})},removeTranstion:function(){$.css3(this.oWrap,{transition:"none"})},calc:function(){var t=this.oWrap.get(0).offsetWidth;this.oWrap.css("marginLeft",-t/2)},show:function(){this.oWrap.css("opacity","1")},hide:function(){this.oWrap.css("opacity","0")},text:function(t){var e=this;clearTimeout(this.timer),this.removeTranstion(),this.hide(),this.transition(),this.oWrap.html(t),this.show(),this.calc(),this.timeBtn&&(this.timer=setTimeout(function(){e.hide()},this.delay))}},window.oTip=new r,oTip.init(),n.exports=r}),define("global/fnDo",[],function(t,e,n){function r(t){t=t||{},this.oWrap=t.oWrap,this.fnDo=t.fnDo||null,this.sTarget=t.sTarget||"",this.lock=!1}r.prototype={init:function(){this.addEvent()},addEvent:function(){var t,e,n;n=this,this.oWrap.on("click",function(r){n.lock||(this.lock=!0,t=$(r.srcElement||r.target),e=t.attr("script-role"),e==n.sTarget&&n.fnDo&&n.fnDo.call(n,t))})},req:function(t,e,n){var r=this;$.post(t,e,function(t){t.err?(oTip.text("操作失败,请重试"),r.lock=!1):(n&&n(t),r.lock=!1)},"json")}},n.exports=r}),define("global/navhilight",[],function(){var t=$("body").attr("page-role"),e=$("[script-role = main_nav]").find("[script-role = text]"),n=$("[script-role = product_footer]").find("[script-role = product_list]");e.each(function(n){t==e.eq(n).text()&&e.eq(n).addClass("active")}),n.each(function(e){t==n.eq(e).text()&&n.eq(e).addClass("active")})});