/*! fanwei 2014-03-10 */
define("lib/iscroll/iscroll",[],function(t,e,n){(function(t,r){function i(t){return""===a?t:(t=t.charAt(0).toUpperCase()+t.substr(1),a+t)}var o=Math,s=r.createElement("div").style,a=function(){for(var t,e="t,webkitT,MozT,msT,OT".split(","),n=0,r=e.length;r>n;n++)if(t=e[n]+"ransform",t in s)return e[n].substr(0,e[n].length-1);return!1}(),c=a?"-"+a.toLowerCase()+"-":"",l=i("transform"),u=i("transitionProperty"),h=i("transitionDuration"),p=i("transformOrigin"),f=i("transitionTimingFunction"),d=i("transitionDelay"),m=/android/gi.test(navigator.appVersion),g=/iphone|ipad/gi.test(navigator.appVersion),v=/hp-tablet/gi.test(navigator.appVersion),y=i("perspective")in s,b="ontouchstart"in t&&!v,_=a!==!1,x=i("transition")in s,w="onorientationchange"in t?"orientationchange":"resize",E=b?"touchstart":"mousedown",S=b?"touchmove":"mousemove",T=b?"touchend":"mouseup",$=b?"touchcancel":"mouseup",H=function(){if(a===!1)return!1;var t={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return t[a]}(),k=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1)}}(),O=function(){return t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),N=y?" translateZ(0)":"",P=function(e,n){var i,o=this;o.wrapper="object"==typeof e?e:r.getElementById(e),o.wrapper.style.overflow="hidden",o.scroller=o.wrapper.children[0],o.options={hScroll:!1,vScroll:!0,x:0,y:0,bounce:!1,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!1,vScrollbar:!1,fixedScrollbar:m,hideScrollbar:g,fadeScrollbar:g&&y,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(t){t.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(i in n)o.options[i]=n[i];o.x=o.options.x,o.y=o.options.y,o.options.useTransform=_&&o.options.useTransform,o.options.hScrollbar=o.options.hScroll&&o.options.hScrollbar,o.options.vScrollbar=o.options.vScroll&&o.options.vScrollbar,o.options.zoom=o.options.useTransform&&o.options.zoom,o.options.useTransition=x&&o.options.useTransition,o.options.zoom&&m&&(N=""),o.scroller.style[u]=o.options.useTransform?c+"transform":"top left",o.scroller.style[h]="0",o.scroller.style[p]="0 0",o.options.useTransition&&(o.scroller.style[f]="cubic-bezier(0.33,0.66,0.66,1)"),o.options.useTransform?o.scroller.style[l]="translate("+o.x+"px,"+o.y+"px)"+N:o.scroller.style.cssText+=";position:absolute;top:"+o.y+"px;left:"+o.x+"px",o.options.useTransition&&(o.options.fixedScrollbar=!0),o.refresh(),o._bind(w,t),o._bind(E),b||"none"!=o.options.wheelAction&&(o._bind("DOMMouseScroll"),o._bind("mousewheel")),o.options.checkDOMChanges&&(o.checkDOMTime=setInterval(function(){o._checkDOMChanges()},500))};P.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(t){var e=this;switch(t.type){case E:if(!b&&0!==t.button)return;e._start(t);break;case S:e._move(t);break;case T:case $:e._end(t);break;case w:e._resize();break;case"DOMMouseScroll":case"mousewheel":e._wheel(t);break;case H:e._transitionEnd(t)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(t){var e,n=this;return n[t+"Scrollbar"]?(n[t+"ScrollbarWrapper"]||(e=r.createElement("div"),n.options.scrollbarClass?e.className=n.options.scrollbarClass+t.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+("h"==t?"height:7px;bottom:1px;left:2px;right:"+(n.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(n.hScrollbar?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;"+c+"transition-property:opacity;"+c+"transition-duration:"+(n.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(n.options.hideScrollbar?"0":"1"),n.wrapper.appendChild(e),n[t+"ScrollbarWrapper"]=e,e=r.createElement("div"),n.options.scrollbarClass||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+c+"background-clip:padding-box;"+c+"box-sizing:border-box;"+("h"==t?"height:100%":"width:100%")+";"+c+"border-radius:3px;border-radius:3px"),e.style.cssText+=";pointer-events:none;"+c+"transition-property:"+c+"transform;"+c+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+c+"transition-duration:0;"+c+"transform: translate(0,0)"+N,n.options.useTransition&&(e.style.cssText+=";"+c+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),n[t+"ScrollbarWrapper"].appendChild(e),n[t+"ScrollbarIndicator"]=e),"h"==t?(n.hScrollbarSize=n.hScrollbarWrapper.clientWidth,n.hScrollbarIndicatorSize=o.max(o.round(n.hScrollbarSize*n.hScrollbarSize/n.scrollerW),8),n.hScrollbarIndicator.style.width=n.hScrollbarIndicatorSize+"px",n.hScrollbarMaxScroll=n.hScrollbarSize-n.hScrollbarIndicatorSize,n.hScrollbarProp=n.hScrollbarMaxScroll/n.maxScrollX):(n.vScrollbarSize=n.vScrollbarWrapper.clientHeight,n.vScrollbarIndicatorSize=o.max(o.round(n.vScrollbarSize*n.vScrollbarSize/n.scrollerH),8),n.vScrollbarIndicator.style.height=n.vScrollbarIndicatorSize+"px",n.vScrollbarMaxScroll=n.vScrollbarSize-n.vScrollbarIndicatorSize,n.vScrollbarProp=n.vScrollbarMaxScroll/n.maxScrollY),n._scrollbarPos(t,!0),void 0):(n[t+"ScrollbarWrapper"]&&(_&&(n[t+"ScrollbarIndicator"].style[l]=""),n[t+"ScrollbarWrapper"].parentNode.removeChild(n[t+"ScrollbarWrapper"]),n[t+"ScrollbarWrapper"]=null,n[t+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var t=this;setTimeout(function(){t.refresh()},m?200:0)},_pos:function(t,e){this.zoomed||(t=this.hScroll?t:0,e=this.vScroll?e:0,this.options.useTransform?this.scroller.style[l]="translate("+t+"px,"+e+"px) scale("+this.scale+")"+N:(t=o.round(t),e=o.round(e),this.scroller.style.left=t+"px",this.scroller.style.top=e+"px"),this.x=t,this.y=e,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(t,e){var n,r=this,i="h"==t?r.x:r.y;r[t+"Scrollbar"]&&(i=r[t+"ScrollbarProp"]*i,0>i?(r.options.fixedScrollbar||(n=r[t+"ScrollbarIndicatorSize"]+o.round(3*i),8>n&&(n=8),r[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=n+"px"),i=0):i>r[t+"ScrollbarMaxScroll"]&&(r.options.fixedScrollbar?i=r[t+"ScrollbarMaxScroll"]:(n=r[t+"ScrollbarIndicatorSize"]-o.round(3*(i-r[t+"ScrollbarMaxScroll"])),8>n&&(n=8),r[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=n+"px",i=r[t+"ScrollbarMaxScroll"]+(r[t+"ScrollbarIndicatorSize"]-n))),r[t+"ScrollbarWrapper"].style[d]="0",r[t+"ScrollbarWrapper"].style.opacity=e&&r.options.hideScrollbar?"0":"1",r[t+"ScrollbarIndicator"].style[l]="translate("+("h"==t?i+"px,0)":"0,"+i+"px)")+N)},_start:function(e){var n,r,i,s,a,c=this,u=b?e.touches[0]:e;c.enabled&&(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,e),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&b&&e.touches.length>1&&(s=o.abs(e.touches[0].pageX-e.touches[1].pageX),a=o.abs(e.touches[0].pageY-e.touches[1].pageY),c.touchesDistStart=o.sqrt(s*s+a*a),c.originX=o.abs(e.touches[0].pageX+e.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=o.abs(e.touches[0].pageY+e.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,e)),c.options.momentum&&(c.options.useTransform?(n=getComputedStyle(c.scroller,null)[l].replace(/[^0-9\-.,]/g,"").split(","),r=+(n[12]||n[4]),i=+(n[13]||n[5])):(r=+getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),i=+getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),(r!=c.x||i!=c.y)&&(c.options.useTransition?c._unbind(H):O(c.aniTime),c.steps=[],c._pos(r,i),c.options.onScrollEnd&&c.options.onScrollEnd.call(c))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=u.pageX,c.pointY=u.pageY,c.startTime=e.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,e),c._bind(S,t),c._bind(T,t),c._bind($,t))},_move:function(t){var e,n,r,i=this,s=b?t.touches[0]:t,a=s.pageX-i.pointX,c=s.pageY-i.pointY,u=i.x+a,h=i.y+c,p=t.timeStamp||Date.now();return i.options.onBeforeScrollMove&&i.options.onBeforeScrollMove.call(i,t),i.options.zoom&&b&&t.touches.length>1?(e=o.abs(t.touches[0].pageX-t.touches[1].pageX),n=o.abs(t.touches[0].pageY-t.touches[1].pageY),i.touchesDist=o.sqrt(e*e+n*n),i.zoomed=!0,r=1/i.touchesDistStart*i.touchesDist*this.scale,i.options.zoomMin>r?r=.5*i.options.zoomMin*Math.pow(2,r/i.options.zoomMin):r>i.options.zoomMax&&(r=2*i.options.zoomMax*Math.pow(.5,i.options.zoomMax/r)),i.lastScale=r/this.scale,u=this.originX-this.originX*i.lastScale+this.x,h=this.originY-this.originY*i.lastScale+this.y,this.scroller.style[l]="translate("+u+"px,"+h+"px) scale("+r+")"+N,i.options.onZoom&&i.options.onZoom.call(i,t),void 0):(i.pointX=s.pageX,i.pointY=s.pageY,(u>0||i.maxScrollX>u)&&(u=i.options.bounce?i.x+a/2:u>=0||i.maxScrollX>=0?0:i.maxScrollX),(h>i.minScrollY||i.maxScrollY>h)&&(h=i.options.bounce?i.y+c/2:h>=i.minScrollY||i.maxScrollY>=0?i.minScrollY:i.maxScrollY),i.distX+=a,i.distY+=c,i.absDistX=o.abs(i.distX),i.absDistY=o.abs(i.distY),6>i.absDistX&&6>i.absDistY||(i.options.lockDirection&&(i.absDistX>i.absDistY+5?(h=i.y,c=0):i.absDistY>i.absDistX+5&&(u=i.x,a=0)),i.moved=!0,i._pos(u,h),i.dirX=a>0?-1:0>a?1:0,i.dirY=c>0?-1:0>c?1:0,p-i.startTime>300&&(i.startTime=p,i.startX=i.x,i.startY=i.y),i.options.onScrollMove&&i.options.onScrollMove.call(i,t)),void 0)},_end:function(e){if(!b||0===e.touches.length){var n,i,s,a,c,u,p,f=this,d=b?e.changedTouches[0]:e,m={dist:0,time:0},g={dist:0,time:0},v=(e.timeStamp||Date.now())-f.startTime,y=f.x,_=f.y;if(f._unbind(S,t),f._unbind(T,t),f._unbind($,t),f.options.onBeforeScrollEnd&&f.options.onBeforeScrollEnd.call(f,e),f.zoomed)return p=f.scale*f.lastScale,p=Math.max(f.options.zoomMin,p),p=Math.min(f.options.zoomMax,p),f.lastScale=p/f.scale,f.scale=p,f.x=f.originX-f.originX*f.lastScale+f.x,f.y=f.originY-f.originY*f.lastScale+f.y,f.scroller.style[h]="200ms",f.scroller.style[l]="translate("+f.x+"px,"+f.y+"px) scale("+f.scale+")"+N,f.zoomed=!1,f.refresh(),f.options.onZoomEnd&&f.options.onZoomEnd.call(f,e),void 0;if(!f.moved)return b&&(f.doubleTapTimer&&f.options.zoom?(clearTimeout(f.doubleTapTimer),f.doubleTapTimer=null,f.options.onZoomStart&&f.options.onZoomStart.call(f,e),f.zoom(f.pointX,f.pointY,1==f.scale?f.options.doubleTapZoom:1),f.options.onZoomEnd&&setTimeout(function(){f.options.onZoomEnd.call(f,e)},200)):this.options.handleClick&&(f.doubleTapTimer=setTimeout(function(){for(f.doubleTapTimer=null,n=d.target;1!=n.nodeType;)n=n.parentNode;"SELECT"!=n.tagName&&"INPUT"!=n.tagName&&"TEXTAREA"!=n.tagName&&(i=r.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,d.screenX,d.screenY,d.clientX,d.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._fake=!0,n.dispatchEvent(i))},f.options.zoom?250:0))),f._resetPos(400),f.options.onTouchEnd&&f.options.onTouchEnd.call(f,e),void 0;if(300>v&&f.options.momentum&&(m=y?f._momentum(y-f.startX,v,-f.x,f.scrollerW-f.wrapperW+f.x,f.options.bounce?f.wrapperW:0):m,g=_?f._momentum(_-f.startY,v,-f.y,0>f.maxScrollY?f.scrollerH-f.wrapperH+f.y-f.minScrollY:0,f.options.bounce?f.wrapperH:0):g,y=f.x+m.dist,_=f.y+g.dist,(f.x>0&&y>0||f.x<f.maxScrollX&&f.maxScrollX>y)&&(m={dist:0,time:0}),(f.y>f.minScrollY&&_>f.minScrollY||f.y<f.maxScrollY&&f.maxScrollY>_)&&(g={dist:0,time:0})),m.dist||g.dist)return c=o.max(o.max(m.time,g.time),10),f.options.snap&&(s=y-f.absStartX,a=_-f.absStartY,o.abs(s)<f.options.snapThreshold&&o.abs(a)<f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(u=f._snap(y,_),y=u.x,_=u.y,c=o.max(u.time,c))),f.scrollTo(o.round(y),o.round(_),c),f.options.onTouchEnd&&f.options.onTouchEnd.call(f,e),void 0;if(f.options.snap)return s=y-f.absStartX,a=_-f.absStartY,o.abs(s)<f.options.snapThreshold&&o.abs(a)<f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(u=f._snap(f.x,f.y),(u.x!=f.x||u.y!=f.y)&&f.scrollTo(u.x,u.y,u.time)),f.options.onTouchEnd&&f.options.onTouchEnd.call(f,e),void 0;f._resetPos(200),f.options.onTouchEnd&&f.options.onTouchEnd.call(f,e)}},_resetPos:function(t){var e=this,n=e.x>=0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,r=e.y>=e.minScrollY||e.maxScrollY>0?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y;return n==e.x&&r==e.y?(e.moved&&(e.moved=!1,e.options.onScrollEnd&&e.options.onScrollEnd.call(e)),e.hScrollbar&&e.options.hideScrollbar&&("webkit"==a&&(e.hScrollbarWrapper.style[d]="300ms"),e.hScrollbarWrapper.style.opacity="0"),e.vScrollbar&&e.options.hideScrollbar&&("webkit"==a&&(e.vScrollbarWrapper.style[d]="300ms"),e.vScrollbarWrapper.style.opacity="0"),void 0):(e.scrollTo(n,r,t||0),void 0)},_wheel:function(t){var e,n,r,i,o,s=this;if("wheelDeltaX"in t)e=t.wheelDeltaX/12,n=t.wheelDeltaY/12;else if("wheelDelta"in t)e=n=t.wheelDelta/12;else{if(!("detail"in t))return;e=n=3*-t.detail}return"zoom"==s.options.wheelAction?(o=s.scale*Math.pow(2,1/3*(n?n/Math.abs(n):0)),s.options.zoomMin>o&&(o=s.options.zoomMin),o>s.options.zoomMax&&(o=s.options.zoomMax),o!=s.scale&&(!s.wheelZoomCount&&s.options.onZoomStart&&s.options.onZoomStart.call(s,t),s.wheelZoomCount++,s.zoom(t.pageX,t.pageY,o,400),setTimeout(function(){s.wheelZoomCount--,!s.wheelZoomCount&&s.options.onZoomEnd&&s.options.onZoomEnd.call(s,t)},400)),void 0):(r=s.x+e,i=s.y+n,r>0?r=0:s.maxScrollX>r&&(r=s.maxScrollX),i>s.minScrollY?i=s.minScrollY:s.maxScrollY>i&&(i=s.maxScrollY),0>s.maxScrollY&&s.scrollTo(r,i,0),void 0)},_transitionEnd:function(t){var e=this;t.target==e.scroller&&(e._unbind(H),e._startAni())},_startAni:function(){var t,e,n,r=this,i=r.x,s=r.y,a=Date.now();if(!r.animating){if(!r.steps.length)return r._resetPos(400),void 0;if(t=r.steps.shift(),t.x==i&&t.y==s&&(t.time=0),r.animating=!0,r.moved=!0,r.options.useTransition)return r._transitionTime(t.time),r._pos(t.x,t.y),r.animating=!1,t.time?r._bind(H):r._resetPos(0),void 0;n=function(){var c,l,u=Date.now();return u>=a+t.time?(r._pos(t.x,t.y),r.animating=!1,r.options.onAnimationEnd&&r.options.onAnimationEnd.call(r),r._startAni(),void 0):(u=(u-a)/t.time-1,e=o.sqrt(1-u*u),c=(t.x-i)*e+i,l=(t.y-s)*e+s,r._pos(c,l),r.animating&&(r.aniTime=k(n)),void 0)},n()}},_transitionTime:function(t){t+="ms",this.scroller.style[h]=t,this.hScrollbar&&(this.hScrollbarIndicator.style[h]=t),this.vScrollbar&&(this.vScrollbarIndicator.style[h]=t)},_momentum:function(t,e,n,r,i){var s=6e-4,a=o.abs(t)/e,c=a*a/(2*s),l=0,u=0;return t>0&&c>n?(u=i/(6/(c/a*s)),n+=u,a=a*n/c,c=n):0>t&&c>r&&(u=i/(6/(c/a*s)),r+=u,a=a*r/c,c=r),c*=0>t?-1:1,l=a/s,{dist:c,time:o.round(l)}},_offset:function(t){for(var e=-t.offsetLeft,n=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,n-=t.offsetTop;return t!=this.wrapper&&(e*=this.scale,n*=this.scale),{left:e,top:n}},_snap:function(t,e){var n,r,i,s,a,c,l=this;for(i=l.pagesX.length-1,n=0,r=l.pagesX.length;r>n;n++)if(t>=l.pagesX[n]){i=n;break}for(i==l.currPageX&&i>0&&0>l.dirX&&i--,t=l.pagesX[i],a=o.abs(t-l.pagesX[l.currPageX]),a=a?500*(o.abs(l.x-t)/a):0,l.currPageX=i,i=l.pagesY.length-1,n=0;i>n;n++)if(e>=l.pagesY[n]){i=n;break}return i==l.currPageY&&i>0&&0>l.dirY&&i--,e=l.pagesY[i],c=o.abs(e-l.pagesY[l.currPageY]),c=c?500*(o.abs(l.y-e)/c):0,l.currPageY=i,s=o.round(o.max(a,c))||200,{x:t,y:e,time:s}},_bind:function(t,e,n){(e||this.scroller).addEventListener(t,this,!!n)},_unbind:function(t,e,n){(e||this.scroller).removeEventListener(t,this,!!n)},destroy:function(){var e=this;e.scroller.style[l]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(w,t),e._unbind(E),e._unbind(S,t),e._unbind(T,t),e._unbind($,t),e.options.hasTouch||(e._unbind("DOMMouseScroll"),e._unbind("mousewheel")),e.options.useTransition&&e._unbind(H),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var t,e,n,r,i=this,s=0,a=0;if(i.scale<i.options.zoomMin&&(i.scale=i.options.zoomMin),i.wrapperW=i.wrapper.clientWidth||1,i.wrapperH=i.wrapper.clientHeight||1,i.minScrollY=-i.options.topOffset||0,i.scrollerW=o.round(i.scroller.offsetWidth*i.scale),i.scrollerH=o.round((i.scroller.offsetHeight+i.minScrollY)*i.scale),i.maxScrollX=i.wrapperW-i.scrollerW,i.maxScrollY=i.wrapperH-i.scrollerH+i.minScrollY,i.dirX=0,i.dirY=0,i.options.onRefresh&&i.options.onRefresh.call(i),i.hScroll=i.options.hScroll&&0>i.maxScrollX,i.vScroll=i.options.vScroll&&(!i.options.bounceLock&&!i.hScroll||i.scrollerH>i.wrapperH),i.hScrollbar=i.hScroll&&i.options.hScrollbar,i.vScrollbar=i.vScroll&&i.options.vScrollbar&&i.scrollerH>i.wrapperH,t=i._offset(i.wrapper),i.wrapperOffsetLeft=-t.left,i.wrapperOffsetTop=-t.top,"string"==typeof i.options.snap)for(i.pagesX=[],i.pagesY=[],r=i.scroller.querySelectorAll(i.options.snap),e=0,n=r.length;n>e;e++)s=i._offset(r[e]),s.left+=i.wrapperOffsetLeft,s.top+=i.wrapperOffsetTop,i.pagesX[e]=s.left<i.maxScrollX?i.maxScrollX:s.left*i.scale,i.pagesY[e]=s.top<i.maxScrollY?i.maxScrollY:s.top*i.scale;else if(i.options.snap){for(i.pagesX=[];s>=i.maxScrollX;)i.pagesX[a]=s,s-=i.wrapperW,a++;for(i.maxScrollX%i.wrapperW&&(i.pagesX[i.pagesX.length]=i.maxScrollX-i.pagesX[i.pagesX.length-1]+i.pagesX[i.pagesX.length-1]),s=0,a=0,i.pagesY=[];s>=i.maxScrollY;)i.pagesY[a]=s,s-=i.wrapperH,a++;i.maxScrollY%i.wrapperH&&(i.pagesY[i.pagesY.length]=i.maxScrollY-i.pagesY[i.pagesY.length-1]+i.pagesY[i.pagesY.length-1])}i._scrollbar("h"),i._scrollbar("v"),i.zoomed||(i.scroller.style[h]="0",i._resetPos(400))},scrollTo:function(t,e,n,r){var i,o,s=this,a=t;for(s.stop(),a.length||(a=[{x:t,y:e,time:n,relative:r}]),i=0,o=a.length;o>i;i++)a[i].relative&&(a[i].x=s.x-a[i].x,a[i].y=s.y-a[i].y),s.steps.push({x:a[i].x,y:a[i].y,time:a[i].time||0});s._startAni()},scrollToElement:function(t,e){var n,r=this;t=t.nodeType?t:r.scroller.querySelector(t),t&&(n=r._offset(t),n.left+=r.wrapperOffsetLeft,n.top+=r.wrapperOffsetTop,n.left=n.left>0?0:n.left<r.maxScrollX?r.maxScrollX:n.left,n.top=n.top>r.minScrollY?r.minScrollY:n.top<r.maxScrollY?r.maxScrollY:n.top,e=void 0===e?o.max(2*o.abs(n.left),2*o.abs(n.top)):e,r.scrollTo(n.left,n.top,e))},scrollToPage:function(t,e,n){var r,i,o=this;n=void 0===n?400:n,o.options.onScrollStart&&o.options.onScrollStart.call(o),o.options.snap?(t="next"==t?o.currPageX+1:"prev"==t?o.currPageX-1:t,e="next"==e?o.currPageY+1:"prev"==e?o.currPageY-1:e,t=0>t?0:t>o.pagesX.length-1?o.pagesX.length-1:t,e=0>e?0:e>o.pagesY.length-1?o.pagesY.length-1:e,o.currPageX=t,o.currPageY=e,r=o.pagesX[t],i=o.pagesY[e]):(r=-o.wrapperW*t,i=-o.wrapperH*e,o.maxScrollX>r&&(r=o.maxScrollX),o.maxScrollY>i&&(i=o.maxScrollY)),o.scrollTo(r,i,n)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(S,t),this._unbind(T,t),this._unbind($,t)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(H):O(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(t,e,n,r){var i=this,o=n/i.scale;i.options.useTransform&&(i.zoomed=!0,r=void 0===r?200:r,t=t-i.wrapperOffsetLeft-i.x,e=e-i.wrapperOffsetTop-i.y,i.x=t-t*o+i.x,i.y=e-e*o+i.y,i.scale=n,i.refresh(),i.x=i.x>0?0:i.x<i.maxScrollX?i.maxScrollX:i.x,i.y=i.y>i.minScrollY?i.minScrollY:i.y<i.maxScrollY?i.maxScrollY:i.y,i.scroller.style[h]=r+"ms",i.scroller.style[l]="translate("+i.x+"px,"+i.y+"px) scale("+n+")"+N,i.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},s=null,e!==void 0?e.iScroll=P:t.iScroll=P,n.exports=P})(window,document)});